[env]
platform = espressif32
framework = arduino
board = esp32dev
custom_firmware_version = 0.0.1
board_build.partitions = min_spiffs.csv
lib_deps =
	Wire
	OneWire
	knolleary/PubSubClient@^2.8
	adafruit/Adafruit SHT31 Library@^2.0.0
	#br3ttb/PID@^1.2.1
	milesburton/DallasTemperature@^3.9.1
	martinsos/HCSR04@^2.0.0
	adafruit/DHT sensor library@^1.4.3
	#dawidchyrzynski/home-assistant-integration@^1.3.0
	starmbi/hp_BH1750@^1.0.0
	paulstoffregen/Time@^1.6.1
	https://github.com/taranais/NTPClient.git
	#https://github.com/ZanzyTHEbar/Atlas-Gravity-Sensor-Library.git
	https://github.com/ZanzyTHEbar/EasyNetworkManager.git
monitor_filters =
	;colorize
	log2file
	time
	default
	esp32_exception_decoder
	;esp8266_exception_decoder
monitor_speed = 115200
upload_speed = 921600
extra_scripts =
	pre:tools/customname.py
	pre:tools/inject_path.py
	post:tools/createzip.py
	post:tools/createwokwi.py
lib_ldf_mode = deep+
build_flags =
	-DDEBUG_ESP_PORT=Serial
	-DENABLE_I2C_SCANNER=${io.i2c}
	-DENABLE_MDNS_SUPPORT=${mqtt.mdns}
	-DMQTT_SECURE=${mqtt.secure}
	-DMQTT_SECURE_PORT=${mqtt.securePort}
	-DMQTT_PORT=${mqtt.port}
	-DENABLE_HASS=${mqtt.hass}
	-DUSE_BH1750=${io.bh1750}
	-Dbh1750_GND=${io.bh1750_gnd}
	-Dbh1750_VCC=${io.bh1750_vcc}
	-Dbh1750_FAST=${io.bh1750_fast}
	-DPUMP_RELAY_PIN=${io.relay_pin}
	-DPUMP_NOZZLE_PIN=${io.nozzle_pin}
	-DECHO_PIN=${io.echo_pin}
	-DTRIG_PIN=${io.trig_pin}
	-DRED_LED_PIN=${io.red}
	-DGREEN_LED_PIN=${io.green}
	-DBLUE_LED_PIN=${io.blue}
	-DRES_RADIUS_1=${io.res_radius_1}
	-DRES_HEIGHT=${io.res_height}
	-DONE_WIRE_BUS=${io.one_wire_bus}
	-DTIME_ZONE_OFFSET=${time_zone_offset.time_zone_offset}
	-DCOMPILE_UNIX_TIME=$UNIX_TIME
	'-DVERSION=""' 
	'-DMQTT_USER="${mqtt.user}"'
	'-DMQTT_PASS="${mqtt.pass}"'
	'-DMQTT_BROKER="${mqtt.broker}"'
	'-DPUMP_TOPIC=${mqtt.pumpTopic}'
	'-DBUILD_ENV_NAME="$PIOENV"'
	'-DWIFI_SSID="${wifi.ssid}"'
	'-DWIFI_PASS="${wifi.password}"'
	'-DDEFAULT_HOSTNAME="${wifi.hostname}"'

	-O2
	-DASYNCWEBSERVER_REGEX

	# Comment these out if you are not using psram
	#-DBOARD_HAS_PSRAM             ; enable psram
	#-mfix-esp32-psram-cache-issue ; fix for psram
	-std=gnu++17				  ; enable c++17
build_unflags = -std=gnu++11
